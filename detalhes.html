<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta de Ativos</title>
<style>
body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
input { padding: 8px; width: 200px; }
button { padding: 8px 12px; }
#resultado { margin-top: 20px; }
.card { background: #000; color: #fff; padding: 12px; margin: 8px 0; border-radius: 8px; }
</style>
</head>
<body>

<h2>Consulta de Ativos</h2>
<input type="text" id="ativoInput" placeholder="Digite o código (VALE3, MXRF11)">
<button id="buscarBtn">Buscar</button>

<div id="resultado"></div>

<script>
const buscarBtn = document.getElementById("buscarBtn");
const input = document.getElementById("ativoInput");
const resultado = document.getElementById("resultado");

buscarBtn.addEventListener("click", () => {
    const codigo = input.value.toUpperCase().trim();
    if(!codigo) return alert("Digite um código válido");

    // Escolher JSON correto
    const jsonFile = codigo.endsWith("11") ? "./data/fiis.json" : "./data/acoes.json";

    fetch(jsonFile)
        .then(r => r.json())
        .then(data => {
            const ativo = data.find(a => a.Papel === codigo);
            if(!ativo) return resultado.innerHTML = "Ativo não encontrado";

            // Exibir os dados
            resultado.innerHTML = "";
            for(const key in ativo){
                const div = document.createElement("div");
                div.className = "card";
                div.innerHTML = `<strong>${key}:</strong> ${ativo[key]}`;
                resultado.appendChild(div);
            }
        })
        .catch(err => {
            console.error(err);
            resultado.innerHTML = "Erro ao carregar dados";
        });
});
</script>

</body>
</html>
