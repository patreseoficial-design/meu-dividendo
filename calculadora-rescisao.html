<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Rescisão Online 2026 ✅ | Meu Dividendo</title>

<style>
/* ===== SEU CSS ORIGINAL (SEM ALTERAÇÕES) ===== */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; max-width: 1200px; margin: 0 auto; padding: 20px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
header { background: white; padding: 1rem 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
.site-title a { color: #28a745; text-decoration: none; font-size: 1.8rem; font-weight: bold; }
.menu { font-size: 1.5rem; cursor: pointer; color: #28a745; }
.calc-box { background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); margin: 2rem 0; }
.inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
.calc-btn { background: linear-gradient(45deg, #28a745, #20c997); color: white; padding: 18px; border: none; border-radius: 15px; font-size: 1.3rem; font-weight: bold; cursor: pointer; width: 100%; }
.result { background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 2.5rem; border-radius: 20px; margin: 2rem 0; display: none; }
.total { font-size: 1.8rem; font-weight: bold; }
</style>
</head>

<body>

<div class="calc-box">
  <div class="inputs">
    <input type="number" id="salario" value="4100">
    <input type="number" id="periculosidade" value="30">
    <input type="number" id="insalubridade" value="0">
    <input type="date" id="admissao" value="2023-02-01">
    <input type="date" id="demissao" value="2026-02-13">
    <select id="tipoDemissao"><option value="semJusta">Sem Justa Causa</option></select>
    <select id="avisoIndenizado"><option value="sim">Sim</option></select>
    <select id="qtdFeriasVencidas"><option value="1">1</option></select>
    <input type="number" id="dependentes" value="1">
  </div>
  <button class="calc-btn" onclick="calcularRescisao()">Calcular</button>
</div>

<div id="resultadoRescisao" class="result">
  <p id="resTotal" class="total"></p>
</div>

<script>
// ===== FORMATADOR =====
function formatBRL(v) {
  return v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
}

// ===== TABELAS 2026 =====
const TABELA_INSS_2026 = [
  { ate: 1412, aliquota: 0.075 },
  { ate: 2666.68, aliquota: 0.09 },
  { ate: 4000.03, aliquota: 0.12 },
  { ate: 7786.02, aliquota: 0.14 }
];

const TETO_INSS = 908.86;

const TABELA_IRRF_2026 = [
  { ate: 2259.20, aliquota: 0, deducao: 0 },
  { ate: 2826.65, aliquota: 0.075, deducao: 169.54 },
  { ate: 3751.05, aliquota: 0.15, deducao: 381.44 },
  { ate: 4664.68, aliquota: 0.225, deducao: 662.66 },
  { ate: Infinity, aliquota: 0.275, deducao: 896.00 }
];

// ===== INSS PROGRESSIVO =====
function calcularINSS(base) {
  let inss = 0, anterior = 0;
  for (const faixa of TABELA_INSS_2026) {
    const limite = Math.min(base, faixa.ate);
    if (limite > anterior) {
      inss += (limite - anterior) * faixa.aliquota;
    }
    anterior = faixa.ate;
  }
  return Math.min(inss, TETO_INSS);
}

// ===== IRRF =====
function calcularIRRF(base, dependentes) {
  base -= dependentes * 189.59;
  if (base <= 0) return 0;
  for (const faixa of TABELA_IRRF_2026) {
    if (base <= faixa.ate) {
      return Math.max(0, base * faixa.aliquota - faixa.deducao);
    }
  }
  return 0;
}

// ===== CONTAGEM DE MESES (15+ DIAS) =====
function contarMeses(inicio, fim) {
  let total = 0;
  let d1 = new Date(inicio);
  let d2 = new Date(fim);
  let cursor = new Date(d1.getFullYear(), d1.getMonth(), 1);

  while (cursor <= d2) {
    const primeiro = new Date(cursor.getFullYear(), cursor.getMonth(), 1);
    const ultimo = new Date(cursor.getFullYear(), cursor.getMonth() + 1, 0);
    const ini = d1 > primeiro ? d1 : primeiro;
    const fimMes = d2 < ultimo ? d2 : ultimo;
    const dias = Math.floor((fimMes - ini) / 86400000) + 1;
    if (dias >= 15) total++;
    cursor.setMonth(cursor.getMonth() + 1);
  }
  return total;
}

// ===== CÁLCULO PRINCIPAL =====
function calcularRescisao() {
  const salario = +salario.value;
  const peric = +periculosidade.value / 100;
  const insal = +insalubridade.value / 100;
  const adm = new Date(admissao.value);
  const dem = new Date(demissao.value);
  const dep = +dependentes.value;

  const REMUNERACAO = salario * (1 + peric + insal);

  const mesesTotais = contarMeses(adm, dem);
  const anos = Math.floor(mesesTotais / 12);

  // ✅ AVISO PRÉVIO CORRETO
  const diasAviso = Math.min(30 + Math.max(0, anos - 1) * 3, 90);
  const aviso = (REMUNERACAO / 30) * diasAviso;

  // ✅ SALDO DE SALÁRIO CORRETO
  const diasMes = new Date(dem.getFullYear(), dem.getMonth() + 1, 0).getDate();
  const saldo = (REMUNERACAO / diasMes) * dem.getDate();

  // ✅ FÉRIAS COM ADICIONAIS
  const feriasVenc = REMUNERACAO;
  const tercoVenc = REMUNERACAO / 3;

  const feriasProp = (REMUNERACAO / 12) * (mesesTotais % 12);
  const tercoProp = feriasProp / 3;

  const decimo = (REMUNERACAO / 12);

  // ✅ FGTS DINÂMICO
  const fgts = REMUNERACAO * 0.08 * mesesTotais;
  const multa = fgts * 0.4;

  // ✅ BASE INSS COMPLETA
  const baseINSS = saldo + aviso + feriasVenc + tercoVenc + feriasProp + tercoProp + decimo;
  const inss = calcularINSS(baseINSS);
  const ir = calcularIRRF(baseINSS - inss, dep);

  const total =
    saldo + aviso +
    feriasVenc + tercoVenc +
    feriasProp + tercoProp +
    decimo + multa -
    inss - ir;

  resTotal.textContent = formatBRL(total);
  resultadoRescisao.style.display = 'block';
}
</script>

</body>
</html>