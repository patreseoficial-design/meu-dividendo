<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu Dividendo | A√ß√µes, FIIs e Calculadora Financeira</title>

  <!-- CSS GLOBAL -->
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/calculadora.css">
</head>

<body style="margin:0; background:#fff; font-family:Arial,sans-serif;">

<header class="topo">
  <div id="menuBtn" onclick="toggleMenu()">‚ò∞</div>
  <a href="index.html" class="logo" style="color:#ffffff; text-decoration:none;">Meu Dividendo</a>
  <div class="profile"></div>

  <nav id="menuLinks" class="menu-links">
    <ul>
      <li><a href="index.html">üè† In√≠cio</a></li>
      <li><a href="paginadecalculadoras.html">Calculadoras</a></li>
      <li><a href="curso-investimento.html">Curso de Investimento</a></li>
    </ul>
  </nav>
</header>

<script>
function toggleMenu() {
  const menu = document.getElementById('menuLinks');
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}
</script>

<div style="text-align:center; margin:40px 0;">
  <h2 style="margin:0; font-size:20px; font-weight:normal;">Cota√ß√µes Atualizadas</h2>
</div>

<!-- MOEDAS -->
<section id="moedas">
  <div style="display:flex; gap:8px; padding:0 8px;">
    <div class="card" style="flex:1; background:#000; color:#fff; padding:12px; border-radius:12px;"><span id="dolar-value">--</span></div>
    <div class="card" style="flex:1; background:#000; color:#fff; padding:12px; border-radius:12px;"><span id="euro-value">--</span></div>
    <div class="card" style="flex:1; background:#000; color:#fff; padding:12px; border-radius:12px;"><span id="yuans-value">--</span></div>
    <div class="card" style="flex:1; background:#000; color:#fff; padding:12px; border-radius:12px;"><span id="bitcoin-value">--</span></div>
  </div>
</section>

<script>
async function carregarMoedas() {
  try {
    const res = await fetch("https://economia.awesomeapi.com.br/json/last/USD-BRL,EUR-BRL,CNY-BRL,BTC-BRL");
    const data = await res.json();

    document.getElementById('dolar-value').innerText = `D√≥lar R$ ${parseFloat(data.USDBRL.ask).toFixed(2)}`;
    document.getElementById('euro-value').innerText = `Euro R$ ${parseFloat(data.EURBRL.ask).toFixed(2)}`;
    document.getElementById('yuans-value').innerText = `Yuan R$ ${parseFloat(data.CNYBRL.ask).toFixed(2)}`;
    document.getElementById('bitcoin-value').innerText =
      `Bitcoin R$ ${parseFloat(data.BTCBRL.ask).toLocaleString('pt-BR')}`;
  } catch {
    document.querySelectorAll('#moedas span').forEach(e => e.innerText = '--');
  }
}

window.addEventListener('load', carregarMoedas);
</script>

<!-- BARRA DE PESQUISA -->
<div style="text-align:center; margin:20px 0;">
  <form id="searchForm">
    <input id="searchInput" placeholder="Digite o c√≥digo do ativo (ex: MXRF11)"
      style="padding:8px; width:200px; border-radius:6px; border:1px solid #ccc;">
    <button style="padding:8px 12px; border-radius:6px; background:#000; color:#fff; border:none;">Buscar</button>
  </form>
</div>

<script>
document.getElementById('searchForm').addEventListener('submit', e => {
  e.preventDefault();
  const t = searchInput.value.trim().toUpperCase();
  if (t) location.href = `detalhes.html?ativo=${t}`;
});
</script>

<!-- TICKER -->
<script>
document.addEventListener("DOMContentLoaded", () => {

  const tickers = [
    "VALE3","ITUB4","MGLU3","PETR4",
  ];

  const container = document.getElementById("ticker");
  if (!container) return;

  async function carregarTickerSeguro() {
    container.innerHTML = "";

    for (const ativo of tickers) {
      try {
        const res = await fetch(`https://brapi.dev/api/quote/${ativo}`);
        const data = await res.json();

        let preco = "--";

        if (data?.results?.length) {
          const a = data.results[0];
          preco =
            a.regularMarketPrice ??
            a.previousClose ??
            a.close ??
            "--";
        }

        const div = document.createElement("div");
        div.className = "ticker-item";
        div.innerHTML = `
          <strong>${ativo}</strong>
          <span class="price">R$ ${preco !== "--" ? Number(preco).toFixed(2) : "--"}</span>
        `;

        container.appendChild(div);

        // atraso proposital para n√£o estourar rate limit
        await new Promise(r => setTimeout(r, 800));

      } catch {
        // mesmo com erro, renderiza o ativo
        const div = document.createElement("div");
        div.className = "ticker-item";
        div.innerHTML = `
          <strong>${ativo}</strong>
          <span class="price">R$ --</span>
        `;
        container.appendChild(div);
      }
    }

    // duplica s√≥ depois de TODOS renderizados
    container.innerHTML += container.innerHTML;
  }

  carregarTickerSeguro();
  setInterval(carregarTickerSeguro, 90000);

});
</script>
<footer>
  <p>¬© 2026 Meu Dividendo ‚Äî Conte√∫do educativo.</p>
</footer>

</body>
</html>